<Window x:Class="ActiproRoslynPOC.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:themes="http://schemas.actiprosoftware.com/winfx/xaml/themes"
        xmlns:editor="http://schemas.actiprosoftware.com/winfx/xaml/syntaxeditor"
        xmlns:docking="http://schemas.actiprosoftware.com/winfx/xaml/docking"
        Title="{Binding WindowTitle}" Width="1400" Height="900">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Menu Grid.Row="0" />

        <ToolBarTray Grid.Row="1">
            <ToolBar>
                <Button Command="{Binding NewFileCommand}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="âœš" Foreground="White" Margin="0,0,5,0"/>
                        <TextBlock Text="æ–°å»ºå·¥ä½œæµ"/>
                    </StackPanel>
                </Button>
                <Separator/>
                <Button Command="{Binding RunCommand}" ToolTip="è¿è¡Œ C# ä»£ç  (F5)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â–¶" Foreground="#4EC9B0" Margin="0,0,5,0"/>
                        <TextBlock Text="è¿è¡Œä»£ç "/>
                    </StackPanel>
                </Button>
                <Button Click="OnRunXamlWorkflowClick" ToolTip="è¿è¡Œå½“å‰ XAML å·¥ä½œæµ (F6)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â–¶" Foreground="#9CDCFE" Margin="0,0,5,0"/>
                        <TextBlock Text="è¿è¡Œå·¥ä½œæµ"/>
                    </StackPanel>
                </Button>
                <Button Click="OnInvokeWorkflowClick" ToolTip="è°ƒç”¨å…¶ä»–å·¥ä½œæµ">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ“ž" Margin="0,0,5,0"/>
                        <TextBlock Text="è°ƒç”¨å·¥ä½œæµ"/>
                    </StackPanel>
                </Button>
                <Separator/>
                <Button Command="{Binding SaveCommand}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ’¾" Margin="0,0,5,0"/>
                        <TextBlock Text="ä¿å­˜"/>
                    </StackPanel>
                </Button>
                <Separator/>
                <Button Click="OnToggleThemeClick">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸŽ¨" Margin="0,0,5,0"/>
                        <TextBlock x:Name="themeButtonText" Text="åˆ‡æ¢æ·±è‰²ä¸»é¢˜"/>
                    </StackPanel>
                </Button>
                <Separator/>
                <Button Click="OnSettingsClick" ToolTip="ç¼–è¾‘å™¨è®¾ç½®">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="âš™" Margin="0,0,5,0"/>
                        <TextBlock Text="è®¾ç½®"/>
                    </StackPanel>
                </Button>
            </ToolBar>

            <!-- è°ƒè¯•å·¥å…·æ  -->
            <ToolBar>
                <TextBlock Text="è°ƒè¯•:" VerticalAlignment="Center" Margin="5,0"/>
                <Separator/>
                <Button Command="{Binding StartDebugCommand}" ToolTip="å¼€å§‹è°ƒè¯• (F9)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ›" Margin="0,0,5,0"/>
                        <TextBlock Text="å¼€å§‹"/>
                    </StackPanel>
                </Button>
                <Button Command="{Binding StepOverCommand}" ToolTip="å•æ­¥æ‰§è¡Œ (F10)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â­" Margin="0,0,5,0"/>
                        <TextBlock Text="å•æ­¥"/>
                    </StackPanel>
                </Button>
                <Button Command="{Binding ContinueCommand}" ToolTip="ç»§ç»­æ‰§è¡Œ (F5)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â–¶" Foreground="Green" Margin="0,0,5,0"/>
                        <TextBlock Text="ç»§ç»­"/>
                    </StackPanel>
                </Button>
                <Button Command="{Binding StopDebugCommand}" ToolTip="åœæ­¢è°ƒè¯• (Shift+F5)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â¹" Foreground="Red" Margin="0,0,5,0"/>
                        <TextBlock Text="åœæ­¢"/>
                    </StackPanel>
                </Button>
            </ToolBar>
        </ToolBarTray>

        <!-- Actipro DockSite å¤šæ–‡æ¡£å¸ƒå±€ -->
        <docking:DockSite x:Name="dockSite" Grid.Row="2"
                          DocumentItemsSource="{Binding OpenDocuments}"
                          WindowsClosing="dockSite_WindowsClosing"
                          WindowActivated="DockSite_WindowActivated">
            <docking:SplitContainer Orientation="Vertical">

                <docking:Workspace>
                    <docking:TabbedMdiHost x:Name="tabbedMdiHost" />
                </docking:Workspace>

                <docking:ToolWindowContainer>
                    <docking:ToolWindow Title="è¾“å‡º" IsOpen="True">
                        <TextBox Text="{Binding Output}"
         IsReadOnly="True"
         BorderThickness="0"
         FontFamily="Consolas"
         VerticalScrollBarVisibility="Auto"/>
                    </docking:ToolWindow>
                    <docking:ToolWindow Title="é”™è¯¯åˆ—è¡¨" IsOpen="True">
                        <DataGrid ItemsSource="{Binding Diagnostics}"
          AutoGenerateColumns="False"
          BorderThickness="0">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="è¡Œ" Binding="{Binding Line}" Width="50"/>
                                <DataGridTextColumn Header="æè¿°" Binding="{Binding Message}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </docking:ToolWindow>
                    <docking:ToolWindow Title="å˜é‡" IsOpen="True">
                        <TextBox Text="{Binding VariablesText}"
         IsReadOnly="True"
         BorderThickness="0"
         FontFamily="Consolas"
         VerticalScrollBarVisibility="Auto"/>
                    </docking:ToolWindow>
                </docking:ToolWindowContainer>
            </docking:SplitContainer>
            <docking:DockSite.AutoHideLeftContainers>
                <docking:ToolWindowContainer>
                    <docking:ToolWindow Title="é¡¹ç›®èµ„æºç®¡ç†å™¨" IsOpen="True">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- é¡¹ç›®æ“ä½œå·¥å…·æ  -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
                                <Button Click="OnOpenProjectClick" ToolTip="æ‰“å¼€é¡¹ç›®" Margin="2">
                                    <TextBlock Text="ï¿½ï¿½"/>
                                </Button>
                                <Button Click="OnCreateProjectClick" ToolTip="æ–°å»ºé¡¹ç›®" Margin="2">
                                    <TextBlock Text="âž•"/>
                                </Button>
                                <Button Click="OnRefreshProjectClick" ToolTip="åˆ·æ–°" Margin="2">
                                    <TextBlock Text="ðŸ”„"/>
                                </Button>
                            </StackPanel>

                            <!-- æ–‡ä»¶æ ‘è§†å›¾ -->
                            <TreeView x:Name="projectTreeView"
                                      Grid.Row="1"
                                      BorderThickness="0"
                                      ItemsSource="{Binding ProjectRootNodes}"
                                      MouseDoubleClick="OnTreeViewMouseDoubleClick">
                                <TreeView.Resources>
                                    <!-- å³é”®èœå• -->
                                    <ContextMenu x:Key="FileTreeContextMenu">
                                        <MenuItem Header="æ–°å»º CS å·¥ä½œæµ" Click="OnNewCsWorkflowClick"/>
                                        <MenuItem Header="æ–°å»º XAML å·¥ä½œæµ" Click="OnNewXamlWorkflowClick"/>
                                        <Separator/>
                                        <MenuItem Header="é‡å‘½å" Click="OnRenameFileClick"/>
                                        <MenuItem Header="åˆ é™¤" Click="OnDeleteFileClick"/>
                                        <Separator/>
                                        <MenuItem Header="åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤º" Click="OnShowInExplorerClick"/>
                                    </ContextMenu>
                                </TreeView.Resources>

                                <TreeView.ItemContainerStyle>
                                    <Style TargetType="TreeViewItem">
                                        <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
                                        <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}"/>
                                        <Setter Property="ContextMenu" Value="{StaticResource FileTreeContextMenu}"/>
                                    </Style>
                                </TreeView.ItemContainerStyle>

                                <TreeView.ItemTemplate>
                                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Icon}" Margin="0,0,5,0"/>
                                            <TextBlock Text="{Binding Name}"/>
                                        </StackPanel>
                                    </HierarchicalDataTemplate>
                                </TreeView.ItemTemplate>
                            </TreeView>
                        </Grid>
                    </docking:ToolWindow>
                </docking:ToolWindowContainer>
            </docking:DockSite.AutoHideLeftContainers>
            
        </docking:DockSite>

        <StatusBar Grid.Row="3">
            <StatusBarItem Content="Ready"/>
            <StatusBarItem>
                <TextBlock x:Name="debugStatusText" Foreground="#4EC9B0" FontWeight="Bold"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="linePanel" Text="Ln 1" Margin="10,0"/>
                    <TextBlock x:Name="columnPanel" Text="Col 1" Margin="10,0"/>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
